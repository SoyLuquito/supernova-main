<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escolha sua Classe - Supernova</title>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <style>
        body {
            background: url('./img/img.jpg') no-repeat center center fixed;
            background-size: cover;
            font-family: 'Poppins', sans-serif;
            color: white;
            text-align: center;
            padding: 20px;
        }
        .classes-container {
            display: flex;
            justify-content: center;
            flex-wrap: nowrap;
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .classe-card {
            width: 250px;
            height: 380px;
            perspective: 1000px;
            cursor: pointer;
            flex-shrink: 0;
        }
        .classe-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.8s;
            transform-style: preserve-3d;
        }
        .classe-card.flipped .classe-inner {
            transform: rotateY(180deg);
        }
        .classe-front, .classe-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 15px;
            padding: 20px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            background: rgba(0, 0, 0, 0.7);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        .classe-back {
            transform: rotateY(180deg);
            overflow-y: auto;
            justify-content: space-between;
        }
        .classe-img {
            width: 140px;
            height: 140px;
            margin: 30px auto 20px;
        }
        .classe-front-content {
            margin-top: auto;
            padding-bottom: 20px;
        }
        .classe-title {
            font-size: 22px;
            margin-bottom: 8px;
            font-weight: bold;
        }
        .classe-style {
            font-size: 12px;
            margin-bottom: 0;
            line-height: 1.4;
        }
        .classe-back-content {
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        .classe-desc {
            font-size: 12px;
            margin: 15px 0;
            text-align: justify;
            line-height: 1.4;
        }
        .attributes {
            width: 100%;
            margin: 15px 0;
        }
        .attribute {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 12px;
            align-items: center;
        }
        .stars {
            display: flex;
        }
        .star {
            width: 14px;
            height: 14px;
            margin-left: 3px;
        }
        .evolutions {
            width: 100%;
            margin: 15px 0;
            font-size: 12px;
        }
        .evolutions-title {
            font-weight: bold;
            margin-bottom: 5px;
        }
        .select-btn-container {
            margin-top: auto;
            padding-top: 10px;
        }
        .select-btn {
            padding: 8px 20px;
            border: none;
            border-radius: 5px;
            font-weight: bold;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
        }
        .select-btn:hover {
            transform: scale(1.03);
        }
        
        /* Cores temÃ¡ticas para cada classe */
        .escudeiro .classe-front, .escudeiro .classe-back {
            border: 2px solid #ff3333;
        }
        .escudeiro .classe-title, .escudeiro .classe-style {
            color: #ff3333;
        }
        .escudeiro .select-btn {
            background-color: #ff3333;
            color: white;
        }
        
        .trapaceiro .classe-front, .trapaceiro .classe-back {
            border: 2px solid #ffcc00;
        }
        .trapaceiro .classe-title, .trapaceiro .classe-style {
            color: #ffcc00;
        }
        .trapaceiro .select-btn {
            background-color: #ffcc00;
            color: #333;
        }
        
        .patrulheiro .classe-front, .patrulheiro .classe-back {
            border: 2px solid #33cc33;
        }
        .patrulheiro .classe-title, .patrulheiro .classe-style {
            color: #33cc33;
        }
        .patrulheiro .select-btn {
            background-color: #33cc33;
            color: white;
        }
        
        .estudioso .classe-front, .estudioso .classe-back {
            border: 2px solid #3399ff;
        }
        .estudioso .classe-title, .estudioso .classe-style {
            color: #3399ff;
        }
        .estudioso .select-btn {
            background-color: #3399ff;
            color: white;
        }
        
        /* Scrollbar personalizada */
        .classe-back::-webkit-scrollbar {
            width: 4px;
        }
        .classe-back::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }
        .classe-back::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 10px;
        }

        @media (max-width: 1100px) {
            .classes-container {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <h1>Escolha sua Classe</h1>
    
    <div class="classes-container">
        <!-- Escudeiro -->
        <div class="classe-card escudeiro" data-classe="escudeiro">
            <div class="classe-inner">
                <div class="classe-front">
                    <img src="./img/classes/escudeiro.gif" alt="Escudeiro" class="classe-img">
                    <div class="classe-front-content">
                        <h2 class="classe-title">ESCUDEIRO</h2>
                        <div class="classe-style">Defesa â€¢ ForÃ§a Bruta â€¢ Corpo a Corpo</div>
                    </div>
                </div>
                <div class="classe-back">
                    <div class="classe-back-content">
                        <div>
                            <h2 class="classe-title">ESCUDEIRO</h2>
                            <div class="classe-style">Defesa â€¢ ForÃ§a Bruta â€¢ Corpo a Corpo</div>
                            <p class="classe-desc">Um combatente robusto e disciplinado, que avanÃ§a na linha de frente protegendo aliados e enfrentando inimigos de perto.</p>
                            
                            <div class="attributes">
                                <div class="attribute">
                                    <span>Vida:</span>
                                    <div class="stars">
                                        <span class="star">ðŸŸ©</span>
                                        <span class="star">ðŸŸ©</span>
                                        <span class="star">ðŸŸ©</span>
                                        <span class="star">ðŸŸ©</span>
                                        <span class="star">â¬œ</span>
                                    </div>
                                </div>
                                <div class="attribute">
                                    <span>Dano:</span>
                                    <div class="stars">
                                        <span class="star">ðŸŸ©</span>
                                        <span class="star">ðŸŸ©</span>
                                        <span class="star">ðŸŸ©</span>
                                        <span class="star">â¬œ</span>
                                        <span class="star">â¬œ</span>
                                    </div>
                                </div>
                                <div class="attribute">
                                    <span>Agilidade:</span>
                                    <div class="stars">
                                        <span class="star">ðŸŸ©</span>
                                        <span class="star">ðŸŸ©</span>
                                        <span class="star">â¬œ</span>
                                        <span class="star">â¬œ</span>
                                        <span class="star">â¬œ</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="evolutions">
                                <div class="evolutions-title">EvoluÃ§Ãµes:</div>
                                <div>Lanceiro â€¢ Guerreiro â€¢ Pugilista</div>
                            </div>
                        </div>
                        
                        <div class="select-btn-container">
                            <button class="select-btn">Selecionar</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Trapaceiro -->
        <div class="classe-card trapaceiro" data-classe="trapaceiro">
            <div class="classe-inner">
                <div class="classe-front">
                    <img src="./img/classes/trapaceiro.png" alt="Trapaceiro" class="classe-img">
                    <div class="classe-front-content">
                        <h2 class="classe-title">TRAPACEIRO</h2>
                        <div class="classe-style">Stealth â€¢ Mobilidade â€¢ Veneno</div>
                    </div>
                </div>
                <div class="classe-back">
                    <div class="classe-back-content">
                        <div>
                            <h2 class="classe-title">TRAPACEIRO</h2>
                            <div class="classe-style">Stealth â€¢ Mobilidade â€¢ Veneno</div>
                            <p class="classe-desc">Um mestre da furtividade e da surpresa. Ataca quando menos se espera e desaparece nas sombras.</p>
                            
                            <div class="attributes">
                                <div class="attribute">
                                    <span>Vida:</span>
                                    <div class="stars">
                                        <span class="star">ðŸŸ©</span>
                                        <span class="star">ðŸŸ©</span>
                                        <span class="star">â¬œ</span>
                                        <span class="star">â¬œ</span>
                                        <span class="star">â¬œ</span>
                                    </div>
                                </div>
                                <div class="attribute">
                                    <span>Dano:</span>
                                    <div class="stars">
                                        <span class="star">ðŸŸ©</span>
                                        <span class="star">ðŸŸ©</span>
                                        <span class="star">ðŸŸ©</span>
                                        <span class="star">â¬œ</span>
                                        <span class="star">â¬œ</span>
                                    </div>
                                </div>
                                <div class="attribute">
                                    <span>Agilidade:</span>
                                    <div class="stars">
                                        <span class="star">ðŸŸ©</span>
                                        <span class="star">ðŸŸ©</span>
                                        <span class="star">ðŸŸ©</span>
                                        <span class="star">ðŸŸ©</span>
                                        <span class="star">â¬œ</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="evolutions">
                                <div class="evolutions-title">EvoluÃ§Ãµes:</div>
                                <div>Ladino â€¢ Assassino â€¢ Trovador</div>
                            </div>
                        </div>
                        
                        <div class="select-btn-container">
                            <button class="select-btn">Selecionar</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Patrulheiro -->
        <div class="classe-card patrulheiro" data-classe="patrulheiro">
            <div class="classe-inner">
                <div class="classe-front">
                    <img src="./img/classes/patrulheiro.png" alt="Patrulheiro" class="classe-img">
                    <div class="classe-front-content">
                        <h2 class="classe-title">PATRULHEIRO</h2>
                        <div class="classe-style">Dano Ã  distÃ¢ncia â€¢ CrÃ­tico â€¢ Armadilhas</div>
                    </div>
                </div>
                <div class="classe-back">
                    <div class="classe-back-content">
                        <div>
                            <h2 class="classe-title">PATRULHEIRO</h2>
                            <div class="classe-style">Dano Ã  distÃ¢ncia â€¢ CrÃ­tico â€¢ Armadilhas</div>
                            <p class="classe-desc">Um atirador de elite que domina o combate Ã  distÃ¢ncia. Letal, veloz e sempre um passo Ã  frente.</p>
                            
                            <div class="attributes">
                                <div class="attribute">
                                    <span>Vida:</span>
                                    <div class="stars">
                                        <span class="star">ðŸŸ©</span>
                                        <span class="star">ðŸŸ©</span>
                                        <span class="star">â¬œ</span>
                                        <span class="star">â¬œ</span>
                                        <span class="star">â¬œ</span>
                                    </div>
                                </div>
                                <div class="attribute">
                                    <span>Dano:</span>
                                    <div class="stars">
                                        <span class="star">ðŸŸ©</span>
                                        <span class="star">ðŸŸ©</span>
                                        <span class="star">ðŸŸ©</span>
                                        <span class="star">ðŸŸ©</span>
                                        <span class="star">ðŸŸ©</span>
                                    </div>
                                </div>
                                <div class="attribute">
                                    <span>Iniciativa:</span>
                                    <div class="stars">
                                        <span class="star">ðŸŸ©</span>
                                        <span class="star">ðŸŸ©</span>
                                        <span class="star">â¬œ</span>
                                        <span class="star">â¬œ</span>
                                        <span class="star">â¬œ</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="evolutions">
                                <div class="evolutions-title">EvoluÃ§Ãµes:</div>
                                <div>Arqueiro â€¢ Domador â€¢ Pistoleiro</div>
                            </div>
                        </div>
                        
                        <div class="select-btn-container">
                            <button class="select-btn">Selecionar</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Estudioso -->
        <div class="classe-card estudioso" data-classe="estudioso">
            <div class="classe-inner">
                <div class="classe-front">
                    <img src="./img/classes/estudioso.png" alt="Estudioso" class="classe-img">
                    <div class="classe-front-content">
                        <h2 class="classe-title">ESTUDIOSO</h2>
                        <div class="classe-style">Versatilidade â€¢ Magia â€¢ Suporte ou Dano</div>
                    </div>
                </div>
                <div class="classe-back">
                    <div class="classe-back-content">
                        <div>
                            <h2 class="classe-title">ESTUDIOSO</h2>
                            <div class="classe-style">Versatilidade â€¢ Magia â€¢ Suporte ou Dano</div>
                            <p class="classe-desc">Um mestre do conhecimento arcano e cientÃ­fico, que canaliza magia ou engenhocas para alterar o campo de batalha.</p>
                            
                            <div class="attributes">
                                <div class="attribute">
                                    <span>Vida:</span>
                                    <div class="stars">
                                        <span class="star">ðŸŸ©</span>
                                        <span class="star">ðŸŸ©</span>
                                        <span class="star">ðŸŸ©</span>
                                        <span class="star">â¬œ</span>
                                        <span class="star">â¬œ</span>
                                    </div>
                                </div>
                                <div class="attribute">
                                    <span>Dano:</span>
                                    <div class="stars">
                                        <span class="star">ðŸŸ©</span>
                                        <span class="star">ðŸŸ©</span>
                                        <span class="star">ðŸŸ©</span>
                                        <span class="star">ðŸŸ©</span>
                                        <span class="star">â¬œ</span>
                                    </div>
                                </div>
                                <div class="attribute">
                                    <span>Mobilidade:</span>
                                    <div class="stars">
                                        <span class="star">ðŸŸ©</span>
                                        <span class="star">ðŸŸ©</span>
                                        <span class="star">â¬œ</span>
                                        <span class="star">â¬œ</span>
                                        <span class="star">â¬œ</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="evolutions">
                                <div class="evolutions-title">EvoluÃ§Ãµes:</div>
                                <div>Mago â€¢ Inventor â€¢ Alquimista</div>
                            </div>
                        </div>
                        
                        <div class="select-btn-container">
                            <button class="select-btn">Selecionar</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore-compat.js"></script>
    
    <script>
        // ConfiguraÃ§Ã£o do Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyBzdrAtJoBUONdyHsEPrzWDTH9FMg1xW78",
            authDomain: "supernova-372bf.firebaseapp.com",
            projectId: "supernova-372bf",
            storageBucket: "supernova-372bf.appspot.com",
            messagingSenderId: "917055386010",
            appId: "1:917055386010:web:3f27d9173e3dd7fbdf8a23"
        };
        
        // Inicializa o Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const auth = firebase.auth();

        // Adiciona evento de clique para virar o card
        document.querySelectorAll('.classe-card').forEach(card => {
            card.addEventListener('click', function(e) {
                // NÃ£o vira o card se o clique foi no botÃ£o "Selecionar"
                if (!e.target.classList.contains('select-btn')) {
                    this.classList.toggle('flipped');
                }
            });
        });

        // SeleÃ§Ã£o de classe
        document.querySelectorAll('.select-btn').forEach(btn => {
            btn.addEventListener('click', async function(e) {
                e.stopPropagation(); // Impede que o card vire ao clicar no botÃ£o
                
                const card = this.closest('.classe-card');
                const classe = card.getAttribute('data-classe');
                const user = auth.currentUser;
                
                if (!user) {
                    alert('UsuÃ¡rio nÃ£o autenticado. FaÃ§a login novamente.');
                    return;
                }
                
                try {
                    // Define os atributos iniciais baseados na classe escolhida
                    let hp, mana;
                    switch(classe) {
                        case 'escudeiro':
                            hp = 150;
                            mana = 50;
                            break;
                        case 'trapaceiro':
                            hp = 100;
                            mana = 75;
                            break;
                        case 'patrulheiro':
                            hp = 120;
                            mana = 80;
                            break;
                        case 'estudioso':
                            hp = 90;
                            mana = 150;
                            break;
                        default:
                            hp = 100;
                            mana = 100;
                    }
                    
                    // Atualiza o documento do usuÃ¡rio no Firestore
                    await db.collection('usuarios').doc(user.uid).update({
                        classe: classe,
                        personagem_criado: true,
                        nivel: 1,
                        hp: hp,
                        hp_max: hp,
                        mana: mana,
                        mana_max: mana,
                        experiencia: 0,
                        data_criacao: firebase.firestore.FieldValue.serverTimestamp()
                    });
                    
                    // Redireciona para o menu
                    window.location.href = 'menu.html';
                } catch (error) {
                    console.error('Erro ao salvar classe:', error);
                    alert('Erro ao salvar sua classe. Por favor, tente novamente.');
                }
            });
        });
    </script>
</body>
</html>